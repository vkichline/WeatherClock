"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}},ClockFace=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={time:new Date}}return _inherits(t,n),_createClass(t,[{key:"tick",value:function(){this.setState(function(){return{time:new Date}})}},{key:"componentDidMount",value:function(){var n=this;this.interval=setInterval(function(){return n.tick()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var t=this.state.time,n=t.getHours(),i=t.getMinutes(),r=t.getSeconds(),u=n>11;n=n>12?n-12:n;n=n==0?12:n;var f=n.toString(),e=(i<10?"0":"")+i.toString(),o=":"+(r<10?"0":"")+r.toString(),s=this.props.days[t.getDay()],h=this.props.months[t.getMonth()],c=s+" "+h+" "+t.getDate()+", "+t.getFullYear();return React.createElement("div",{className:"clock-face-container"},React.createElement("table",{className:"clock-face"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{rowSpan:"2",className:"time"},f+":"+e),React.createElement("td",{className:"seconds"},o)),React.createElement("tr",null,React.createElement("td",{className:"ampm"},u?"pm":"am")),React.createElement("tr",null,React.createElement("td",{colSpan:"2",className:"date"},c)))))}}]),t}(React.Component);ClockFace.defaultProps={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbrev:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};var TimeDetails=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={time:new Date}}return _inherits(t,n),_createClass(t,[{key:"tick",value:function(){this.setState(function(){return{time:new Date}})}},{key:"componentDidMount",value:function(){var n=this;this.interval=setInterval(function(){return n.tick()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"formatTime",value:function(n,t){var i=t?n.getUTCHours():n.getHours(),r=t?n.getUTCMinutes():n.getMinutes(),u=t?n.getUTCSeconds():n.getSeconds(),f=i>11;return i=f?i-12:i,i==0&&(i=12),i.toString()+":"+(r<10?"0"+r:r.toString())+":"+(u<10?"0"+u:u.toString())+" "+(f?"PM":"AM")}},{key:"formatSiderialTime",value:function(n){var t=n%1*60,r=Math.trunc(n),i=t%1*60;return t=Math.trunc(t),i=Math.trunc(i),r.toString()+":"+(t<10?"0"+t:t.toString())+":"+(i<10?"0"+i:i.toString())}},{key:"calcLST",value:function(n){var r=n.getTimezoneOffset()/-60,i=0,t=Math.abs(r*15);t>180&&(t=t-180);t=Math.abs(t);var u=n.getHours()+n.getMinutes()/60+n.getSeconds()/3600,e=n.getMonth()+1,o=n.getDate(),s=n.getFullYear(),h=this.modDay(u-r),f=this.getDayno2K(s,e,o,u),c=this.mod2pi(282.9404+4.70935*Math.pow(10,-5)*f),l=this.mod2pi(356.047+.9856002585*f),a=this.mod2pi(l+c),v=a/15;return i=this.modDay(v+h+t/-15)+11+56/60,i>=24&&(i=i-24),i}},{key:"getDayno2K",value:function(n,t,i,r){var u=this.julianDay(n,t,i,r);return parseFloat(u)-2451543.5}},{key:"modDay",value:function(n){var i=n/24,t=24*(i-this.absFloor(i));return t<0&&(t=t+24),t}},{key:"absFloor",value:function(n){return n>=0?Math.floor(n):Math.ceil(n)}},{key:"mod2pi",value:function(n){var i=n/360,t=360*(i-this.absFloor(i));return t<0&&(t=360+t),t}},{key:"getDaysinMonth",value:function(n,t){n=parseFloat(n);t=parseFloat(t);var i=31;return(n==4||n==6||n==9||n==11)&&(i=30),n==2&&(i=28,t%4==0&&(i=29),t%100==0&&(i=28),t%400==0&&(i=29)),i}},{key:"julianDay",value:function(n,t,i,r){t=parseFloat(t);n=parseFloat(n);i=parseFloat(i);r=parseFloat(r);var f=100*n+t-190002.5,u=367*n;return u-=Math.floor(7*(n+Math.floor((t+9)/12))/4),u+=Math.floor(275*t/9),u+=i,u+=r/24,u+=1721013.5,u-=.5*f/Math.abs(f),u+.5}},{key:"getGMST",value:function(n){var u=n.getUTCFullYear(),i=n.getUTCMonth()+1,o=n.getUTCDate(),s=n.getUTCHours(),h=n.getUTCMinutes(),c=n.getUTCSeconds();(i==1||i==2)&&(u=u-1,i=i+12);var f=Math.floor(u/100),l=2-f+Math.floor(f/4),a=Math.floor(365.25*u),v=Math.floor(30.6001*(i+1)),e=l+a+v-730550.5+o+(s+h/60+c/3600)/24,r=e/36525,t=280.46061837+360.98564736629*e+.000387933*r*r-r*r*r/3871e4;if(t>0)while(t>360)t-=360;else while(t<0)t+=360;return t}},{key:"getDayOfYear",value:function(n){var t=new Date(n.getFullYear(),0,0),i=n-t+(t.getTimezoneOffset()-n.getTimezoneOffset())*6e4;return Math.floor(i/864e5)}},{key:"getSecondOfYear",value:function(n){var t=new Date(n.getFullYear(),0,0),i=n-t+(t.getTimezoneOffset()-n.getTimezoneOffset())*60;return Math.floor(i/1e3)}},{key:"render",value:function(){var n=this.state.time,t=0+n.getHours()+n.getMinutes()/60+n.getSeconds()/3600,i=this.julianDay(n.getFullYear(),n.getMonth(),n.getDate(),t),r=this.calcLST(n);return React.createElement("div",{className:"time-details"},React.createElement("div",null,React.createElement("span",{className:"title"},"UTC:"),React.createElement("span",{className:"value"},this.formatTime(n,!0))),React.createElement("div",null,React.createElement("span",{className:"title"},"Julian Day:"),React.createElement("span",{className:"value"},i.toFixed(4).toLocaleString("en"))),React.createElement("div",null,React.createElement("span",{className:"title"},"Sidereal Time:"),React.createElement("span",{className:"value"},this.formatSiderialTime(r))),React.createElement("div",null,React.createElement("span",{className:"title"},"GMST:"),React.createElement("span",{className:"value"},this.getGMST(n).toFixed(4)+"° RA")),React.createElement("div",null,React.createElement("span",{className:"title"},"Time Zone:"),React.createElement("span",{className:"value"},n.getTimezoneOffset()/60)),React.createElement("div",null,React.createElement("span",{className:"title"},"Day of Year:"),React.createElement("span",{className:"value"},this.getDayOfYear(n))),React.createElement("div",null,React.createElement("span",{className:"title"},"Second:"),React.createElement("span",{className:"value"},this.getSecondOfYear(n).toLocaleString("en"))),React.createElement("div",null,React.createElement("span",{className:"title"}),React.createElement("span",{className:"value"})))}}]),t}(React.Component),WeatherForecast=function(n){function t(){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,n),_createClass(t,[{key:"getIconClass",value:function(n){n=parseInt(n);switch(n){case 25:case 32:case 33:case 34:case 36:case 3200:return"clear-day";case 0:case 1:case 2:case 6:case 8:case 9:case 10:case 11:case 12:case 17:case 35:case 39:case 40:return"rain";case 3:case 4:case 37:case 38:case 45:case 47:return"thunderstorms";case 5:case 7:case 13:case 14:case 16:case 18:case 41:case 42:case 43:case 46:return"snow";case 15:case 19:case 20:case 21:case 22:return"fog";case 24:case 23:return"windy";case 26:case 27:case 28:case 31:return"cloudy";case 29:case 30:case 44:return"partly-cloudy-day"}}},{key:"render",value:function(){var t="icon-image",n=this.props.channel;return n.hasOwnProperty("item")&&n.item.condition.code!=""&&(t=" icon-image "+this.getIconClass(n.item.condition.code)),React.createElement("div",{className:"weather-forecast-container"},React.createElement("div",{className:"weather-forecast"},React.createElement("div",{className:"temperature"},n.hasOwnProperty("item")?n.item.condition.temp+"°":"?"),React.createElement("div",{className:"icon"},React.createElement("img",{className:t,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII="}))))}}]),t}(React.Component),WeatherDetails=function(n){function t(){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var n=this.props.channel;return n.hasOwnProperty("item")?React.createElement("div",{className:"weather-details"},React.createElement("div",null,React.createElement("span",{className:"title"},"Location:"),React.createElement("span",{className:"value"},n.location.city)),React.createElement("div",null,React.createElement("span",{className:"title"},"Wind Chill:"),React.createElement("span",{className:"value"},n.wind.chill+"°"," ",n.units.temperature)),React.createElement("div",null,React.createElement("span",{className:"title"},"Direction:"),React.createElement("span",{className:"value"},n.wind.direction+"°")),React.createElement("div",null,React.createElement("span",{className:"title"},"Speed:"),React.createElement("span",{className:"value"},n.wind.speed," ",n.units.speed)),React.createElement("div",null,React.createElement("span",{className:"title"},"Humidity:"),React.createElement("span",{className:"value"},n.atmosphere.humidity+"%")),React.createElement("div",null,React.createElement("span",{className:"title"},"Pressure:"),React.createElement("span",{className:"value"},n.atmosphere.pressure)),React.createElement("div",null,React.createElement("span",{className:"title"},"Visibility:"),React.createElement("span",{className:"value"},n.atmosphere.visibility," ",n.units.distance)),React.createElement("div",null,React.createElement("span",{className:"title"},"Sunrise:"),React.createElement("span",{className:"value"},n.astronomy.sunrise)),React.createElement("div",null,React.createElement("span",{className:"title"},"Sunset:"),React.createElement("span",{className:"value"},n.astronomy.sunset)),React.createElement("div",null,React.createElement("span",{className:"title"},"Latitude:"),React.createElement("span",{className:"value"},n.item.lat)),React.createElement("div",null,React.createElement("span",{className:"title"},"Longitude:"),React.createElement("span",{className:"value"},n.item.long))):React.createElement("div",{className:"weather-details"})}}]),t}(React.Component),WeatherClock=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={channel:{}}}return _inherits(t,n),_createClass(t,[{key:"getForecast",value:function(n){var i="select * from weather.forecast where woeid="+this.props.cities[6].key,r="https://query.yahooapis.com/v1/public/yql?format=json&q="+i,t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE&&t.status===200){var i=JSON.parse(t.response),r=i.query.results;n(r)}};t.open("GET",r);t.send()}},{key:"refresh",value:function(){var n=this;this.getForecast(function(t){n.setState({channel:t.channel})})}},{key:"componentDidMount",value:function(){var n=this;this.refresh();this.interval=setInterval(function(){return n.refresh()},36e5)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return React.createElement("div",{className:"app-container"},React.createElement("div",{className:"column1"},React.createElement(TimeDetails,null)),React.createElement("div",{className:"column2"},React.createElement(ClockFace,null),React.createElement(WeatherForecast,{channel:this.state.channel})),React.createElement("div",{className:"column3"},React.createElement(WeatherDetails,{channel:this.state.channel})))}}]),t}(React.Component);WeatherClock.defaultProps={cities:[{key:2357536,label:"Austin, TX"},{key:2379574,label:"Chicago, IL"},{key:2459115,label:"New York, NY"},{key:2475687,label:"Portland, OR"},{key:2487956,label:"San Francisco, CA"},{key:2490383,label:"Seattle, WA"},{key:2433074,label:"Kirkland, WA"}]};$(document).ready(function(){ReactDOM.render(React.createElement(WeatherClock,null),document.getElementById("mount"))});